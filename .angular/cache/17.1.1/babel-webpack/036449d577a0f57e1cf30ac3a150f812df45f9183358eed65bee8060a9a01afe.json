{"ast":null,"code":"import _asyncToGenerator from \"F:/Evallo Project/mdb-proj/mdb5-free-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { MdbAccordionModule } from 'mdb-angular-ui-kit/accordion';\nimport { MdbCarouselModule } from 'mdb-angular-ui-kit/carousel';\nimport { MdbCheckboxModule } from 'mdb-angular-ui-kit/checkbox';\nimport { MdbCollapseModule } from 'mdb-angular-ui-kit/collapse';\nimport { MdbDropdownModule } from 'mdb-angular-ui-kit/dropdown';\nimport { MdbFormsModule } from 'mdb-angular-ui-kit/forms';\nimport { MdbModalModule } from 'mdb-angular-ui-kit/modal';\nimport { MdbPopoverModule } from 'mdb-angular-ui-kit/popover';\nimport { MdbRadioModule } from 'mdb-angular-ui-kit/radio';\nimport { MdbRangeModule } from 'mdb-angular-ui-kit/range';\nimport { MdbRippleModule } from 'mdb-angular-ui-kit/ripple';\nimport { MdbScrollspyModule } from 'mdb-angular-ui-kit/scrollspy';\nimport { MdbTabsModule } from 'mdb-angular-ui-kit/tabs';\nimport { MdbTooltipModule } from 'mdb-angular-ui-kit/tooltip';\nimport { MdbValidationModule } from 'mdb-angular-ui-kit/validation';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/server/server-api.service\";\nimport * as i4 from \"../services/userMgmt/user.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"mdb-angular-ui-kit/validation\";\nfunction ContentSubmissionComponent_button_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵtext(1, \"Create Content\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.contentForm.valid);\n  }\n}\nfunction ContentSubmissionComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"span\", 21);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ContentSubmissionComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r2.registerError ? \"text-danger\" : \"text-success\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.regsisterationReponse);\n  }\n}\nexport let ContentSubmissionComponent = /*#__PURE__*/(() => {\n  class ContentSubmissionComponent {\n    constructor(fb, router, server, Users) {\n      this.fb = fb;\n      this.router = router;\n      this.server = server;\n      this.Users = Users;\n      this.showLoading = false;\n      this.regsisterationReponse = null;\n      this.registerError = false;\n      this.showErrorMessage = false;\n      this.activeUserId = null;\n      this.activeIDSubscription = this.Users.activeUserIdObservble.subscribe(e => {\n        this.activeUserId = e;\n      });\n    }\n    ngOnInit() {\n      this.buildContentSubmissionForm();\n    }\n    buildContentSubmissionForm() {\n      this.contentForm = this.fb.group({\n        title: ['', [Validators.required]],\n        description: ['', [Validators.required]],\n        link: ['', [Validators.required]],\n        info: ['']\n      });\n    }\n    callSubmitContentApi() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log(\"here\");\n        _this.showLoading = true;\n        let newContent = {\n          UserId: _this.activeUserId,\n          Title: _this.contentForm.controls.title.value,\n          Description: _this.contentForm.controls.description.value,\n          Link: _this.contentForm.controls.link.value,\n          Info: _this.contentForm.controls.info.value\n        };\n        try {\n          yield _this.server.addUserContentFunction(newContent).then(fulfilled => {\n            _this.showErrorMessage = true;\n            _this.regsisterationReponse = fulfilled.Message;\n            _this.showLoading = false;\n            _this.registerError = false;\n            _this.contentForm.reset();\n          }, rejected => {\n            console.log(rejected, \"rejected\");\n            _this.showErrorMessage = true;\n            _this.regsisterationReponse = rejected.Message;\n            _this.showLoading = false;\n            _this.registerError = true;\n          });\n          setTimeout(() => {\n            _this.showErrorMessage = false;\n          }, 3000);\n        } catch (err) {\n          _this.showLoading = false;\n          console.error(err);\n        }\n      })();\n    }\n    static #_ = this.ɵfac = function ContentSubmissionComponent_Factory(t) {\n      return new (t || ContentSubmissionComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ServerApiService), i0.ɵɵdirectiveInject(i4.UserService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ContentSubmissionComponent,\n      selectors: [[\"app-content-submission\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 25,\n      vars: 4,\n      consts: [[1, \"FullDisplay\", 2, \"width\", \"100%\", \"height\", \"100vh\", \"display\", \"flex\", \"justify-content\", \"center\", \"align-items\", \"center\", \"align-content\", \"center\", \"justify-items\", \"center\"], [1, \"displayForm\", 2, \"width\", \"70%\", \"height\", \"70%\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\", \"mb-4\"], [1, \"col\"], [\"data-mdb-input-init\", \"\", 1, \"form-outline\"], [\"mdbValidate\", \"\", \"type\", \"text\", \"id\", \"form6Example1\", \"formControlName\", \"title\", 1, \"form-control\"], [\"for\", \"form6Example1\", 1, \"form-label\"], [\"mdbValidate\", \"\", \"type\", \"text\", \"id\", \"form6Example2\", \"formControlName\", \"description\", 1, \"form-control\"], [\"for\", \"form6Example2\", 1, \"form-label\"], [\"data-mdb-input-init\", \"\", 1, \"form-outline\", \"mb-4\"], [\"mdbValidate\", \"\", \"type\", \"text\", \"id\", \"form6Example3\", \"placeholder\", \"For Ex. https://www.google.com/\", \"formControlName\", \"link\", 1, \"form-control\"], [\"for\", \"form6Example3\", 1, \"form-label\"], [\"id\", \"form6Example7\", \"rows\", \"4\", \"formControlName\", \"info\", 1, \"form-control\"], [\"for\", \"form6Example7\", 1, \"form-label\"], [\"data-mdb-ripple-init\", \"\", \"type\", \"button\", \"type\", \"submit\", \"class\", \"btn btn-primary btn-block mb-4\", 3, \"disabled\", 4, \"ngIf\"], [\"class\", \"row\", \"style\", \"display: flex; \\n                justify-content: center;\", 4, \"ngIf\"], [\"class\", \"row\", \"style\", \"display: flex; \\n                justify-content: center;text-align: center;\", 4, \"ngIf\"], [\"data-mdb-ripple-init\", \"\", \"type\", \"button\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\", \"mb-4\", 3, \"disabled\"], [1, \"row\", 2, \"display\", \"flex\", \"justify-content\", \"center\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\", 2, \"display\", \"flex\", \"justify-content\", \"center\"], [1, \"visually-hidden\"], [1, \"row\", 2, \"display\", \"flex\", \"justify-content\", \"center\", \"text-align\", \"center\"]],\n      template: function ContentSubmissionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function ContentSubmissionComponent_Template_form_ngSubmit_2_listener() {\n            return ctx.callSubmitContentApi();\n          });\n          i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n          i0.ɵɵelement(6, \"input\", 6);\n          i0.ɵɵelementStart(7, \"label\", 7);\n          i0.ɵɵtext(8, \"Title\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5);\n          i0.ɵɵelement(11, \"input\", 8);\n          i0.ɵɵelementStart(12, \"label\", 9);\n          i0.ɵɵtext(13, \"Description\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(14, \"div\", 10);\n          i0.ɵɵelement(15, \"input\", 11);\n          i0.ɵɵelementStart(16, \"label\", 12);\n          i0.ɵɵtext(17, \"Link\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 10);\n          i0.ɵɵelement(19, \"textarea\", 13);\n          i0.ɵɵelementStart(20, \"label\", 14);\n          i0.ɵɵtext(21, \"Additional information\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(22, ContentSubmissionComponent_button_22_Template, 2, 1, \"button\", 15)(23, ContentSubmissionComponent_div_23_Template, 4, 0, \"div\", 16)(24, ContentSubmissionComponent_div_24_Template, 3, 4, \"div\", 17);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.contentForm);\n          i0.ɵɵadvance(20);\n          i0.ɵɵproperty(\"ngIf\", ctx.showLoading == false);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showLoading == true);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showErrorMessage == true);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, CommonModule, i5.NgIf, MdbAccordionModule, MdbCarouselModule, MdbCheckboxModule, MdbCollapseModule, MdbDropdownModule, MdbFormsModule, MdbModalModule, MdbPopoverModule, MdbRadioModule, MdbRangeModule, MdbRippleModule, MdbScrollspyModule, MdbTabsModule, MdbTooltipModule, MdbValidationModule, i6.MdbValidateDirective, HttpClientModule, RouterModule]\n    });\n  }\n  return ContentSubmissionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}